#https://data.oecd.org/price/inflation-cpi.htm
#https://sdmx1.readthedocs.io/en/latest/sources.html#abs-australian-bureau-of-statistics

#https://api.data.abs.gov.au/data/ABS,CPI,1.0.0/1.114120+115492+115522+115528+131179+131180+131181+131182+131184+131186+131187+131188+131189+131191+131193+131195+30001+30002+30003+30007+30012+30016+30022+30024+30025+30026+30027+30033+40106+97556+97561+97563+97565+114121+114122+1144+115484+115485+115495+115496+115497+115498+115500+115501+115520+115524+115529+131178+131183+131185+131190+131192+131194+30014+40001+40002+40004+40005+40006+40007+40008+40009+40010+40012+40014+40015+40025+40026+40027+40029+40030+40034+40045+40046+40047+40048+40053+40055+40058+40060+40066+40067+40072+40073+40077+40078+40080+40081+40083+40084+40085+40086+40087+40088+40089+40090+40091+40092+40093+40094+40095+40096+40098+40101+40102+97549+97550+97551+97554+97555+97557+97558+97559+97560+97564+97567+97571+97572+97573+97574+102675+102676+104101+104102+104104+104105+104120+104122+115488+115489+115493+115902+115922+115941+115961+117101+117104+117107+117121+117124+117127+117144+126670+128058+128061+131197+131199+20001+20002+20003+20004+20005+20006+115486.10..Q?startPeriod=2020-Q3&dimensionAtObservation=AllDimensions
library(rsdmx)
library(dplyr)
library(data.table)
setwd("C:/Users/61475/OneDrive/Documents/PIC/PIC")


cpi_groups <- read.csv("groups4.csv")

#read dsd
#"https://api.data.abs.gov.au/dataflow/ABS/CPI/1.0.0?references=all"
dsdUrl <- "abs_cpi_dsd.sdmx"
dsd <- readSDMX(dsdUrl, isURL=FALSE)

#read dataset
myUrl <- "abs_cpi_dataset.sdmx"
dataset <- readSDMX(myUrl, isURL=FALSE, dsd=TRUE)

#associate data and dsd
#dataset <- setDSD(dataset, dsd)
cpi_all_data <- as.data.frame(dataset) #%>%  mutate(INDEX = as.numeric(INDEX))

#s <- full_join(cpi_all_data, cpi_groups, join_by=INDEX)





